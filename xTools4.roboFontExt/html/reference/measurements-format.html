<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Measurements format · xTools4</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="http://localhost:4000/css/style.css" type="text/css" />
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
  </head>
  <body >
    <nav id='navbar-main' class="navbar fixed-top navbar-expand-sm"> <!-- navbar-dark bg-secondary -->
      <div class="container mx-auto px-md-4">
        <a class="navbar-brand" id='logo' href="http://localhost:4000/">
          <i class="bi bi-tools fs-2"></i>
        </a>
        <button class="navbar-toggler navbar-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarItems" aria-controls="navbarItems" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse user-select-none" id="navbarItems">
          <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="http://localhost:4000/explanations/">explanations</a></li>
            <li class="nav-item"><a class="nav-link" href="http://localhost:4000/tutorials/">tutorials</a></li>
            <li class="nav-item"><a class="nav-link" href="http://localhost:4000/how-tos/">how-tos</a></li>
            <li class="nav-item"><a class="nav-link" href="http://localhost:4000/reference/">reference</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <main class='home mt-5'>
      <div class="container mx-auto px-md-4 py-4 bg-white">
        <div class='row mt-2'>
          <h1 class='col-sm-9 mt-sm-1'>Measurements format</h1>
          <nav class='col-sm-3 mt-sm-2'>
            <ul class="pagination pagination-sm float-end">
              <li class="page-item">
                <a class="page-link px-3 rounded-0 prev" href="http://localhost:4000//reference/dialogs/variable/varglyph-assistant" title='VarGlyphAssistant'>&laquo;</a>
              </li>
            </ul>
          </nav>
        </div>
        <nav aria-label="breadcrumb">
          <ol class='breadcrumb'>
            <li class='breadcrumb-item small'>
              <a href="/">Index</a>
            </li>
            <li class='breadcrumb-item small'>
              <a href="/reference/">
                Reference
              </a>
            </li>
            <li class='breadcrumb-item small'>measurements format</li>
          </ol>
        </nav>
        <p class="lead">A data format to store definitions of font-level and glyph-level measurements.</p>
        <ul id="markdown-toc">
          <li><a href="#data-structure" id="markdown-toc-data-structure">Data structure</a>    
            <ul>
              <li><a href="#font-level-measurements" id="markdown-toc-font-level-measurements">Font-level measurements</a></li>
              <li><a href="#glyph-level-measurements" id="markdown-toc-glyph-level-measurements">Glyph-level measurements</a></li>
              <li><a href="#direction-keys" id="markdown-toc-direction-keys">Direction keys</a></li>
              <li><a href="#point-indexes-or-shortcuts" id="markdown-toc-point-indexes-or-shortcuts">Point indexes or shortcuts</a></li>
              <li><a href="#sign-of-the-measured-values" id="markdown-toc-sign-of-the-measured-values">Sign of the measured values</a></li>
            </ul>
          </li>
          <li><a href="#python-example" id="markdown-toc-python-example">Python example</a></li>
          <li><a href="#json-format" id="markdown-toc-json-format">JSON format</a></li>
        </ul>
        <h2 id="data-structure">Data structure</h2>
        <p>A measurement establishes a link between two points and allows us to calculate the distance between them.</p>
        <p>The order of the points determine if the measurement is positive or negative.</p>
        <h3 id="font-level-measurements">Font-level measurements</h3>
        <ul>
          <li>A font may contain multiple font-level measurements.</li>
          <li>Font measurement names must be unique.</li>
          <li>The order of the font measurements matters.</li>
        </ul>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>attribute</th>
              <th>description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>name</td>
              <td>name of the measurement</td>
            </tr>
            <tr>
              <td>glyph 1</td>
              <td>name of the glyph containing the 1st measurement point</td>
            </tr>
            <tr>
              <td>point 1</td>
              <td>index or shortcut of 1st measurement point</td>
            </tr>
            <tr>
              <td>glyph 2</td>
              <td>name of the glyph containing the 2nd measurement point</td>
            </tr>
            <tr>
              <td>point 2</td>
              <td>index or shortcut of 2nd measurement point</td>
            </tr>
            <tr>
              <td>direction</td>
              <td>direction of measurement</td>
            </tr>
            <tr>
              <td>parent</td>
              <td>parent measurement (optional)</td>
            </tr>
            <tr>
              <td>description</td>
              <td>description of this measurement (optional)</td>
            </tr>
          </tbody>
        </table>
        <h3 id="glyph-level-measurements">Glyph-level measurements</h3>
        <ul>
          <li>A glyph may contain multiple glyph-level measurements.</li>
          <li>Glyph measurement names are usually related to font-level measurements.</li>
          <li>Glyph measurement names must <strong>not</strong> be unique.</li>
          <li>Glyph measurement identifiers are created from the point indexes.</li>
          <li>The order of glyph measurements follows the order of font measurements.</li>
        </ul>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>attribute</th>
              <th>description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>name</td>
              <td>name of the measurement</td>
            </tr>
            <tr>
              <td>point 1</td>
              <td>index or shortcut of 1st measurement point</td>
            </tr>
            <tr>
              <td>point 2</td>
              <td>index or shortcut of 2nd measurement point</td>
            </tr>
            <tr>
              <td>direction</td>
              <td>direction of measurement</td>
            </tr>
          </tbody>
        </table>
        <h3 id="direction-keys">Direction keys</h3>
        <p>The direction of measurement must be one of the following characters:</p>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>characters</th>
              <th>description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>x</td>
              <td>horizontal measurement</td>
            </tr>
            <tr>
              <td>y</td>
              <td>vertical measurement</td>
            </tr>
            <tr>
              <td>a</td>
              <td>angled measurement</td>
            </tr>
          </tbody>
        </table>
        <h3 id="point-indexes-or-shortcuts">Point indexes or shortcuts</h3>
        <p>Point indexes are expressed as integers.</p>
        <p>Font-level vertical metrics values are also acessible using the following shortcut characters:</p>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>character</th>
              <th>description</th>
              <th>x</th>
              <th>y</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>A</td>
              <td>ascender</td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
              <td><code class="language-plaintext highlighter-rouge">font.info.ascender</code></td>
            </tr>
            <tr>
              <td>B</td>
              <td>baseline</td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
            </tr>
            <tr>
              <td>C</td>
              <td>cap height</td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
              <td><code class="language-plaintext highlighter-rouge">font.info.capHeight</code></td>
            </tr>
            <tr>
              <td>D</td>
              <td>descender</td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
              <td><code class="language-plaintext highlighter-rouge">font.info.descender</code></td>
            </tr>
            <tr>
              <td>X</td>
              <td>x-height</td>
              <td><code class="language-plaintext highlighter-rouge">0</code></td>
              <td><code class="language-plaintext highlighter-rouge">font.info.xHeight</code></td>
            </tr>
          </tbody>
        </table>
        <h3 id="sign-of-the-measured-values">Sign of the measured values</h3>
        <p><strong>The sign of the measured values matters.</strong> While most measurements are usually positive, some are by definition <em>negative</em> – for example the descender value or a bottom overshoot.</p>
        <p>If a font-level value is positive, and the measured glyph value is negative, we can suspect an issue with the contours (shapes turning inside out).</p>
        <h2 id="python-example">Python example</h2>
        <p>The key for font-level measurements is the name of the measurement.</p>
        <div class="language-python highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="n">fontMeasurements</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'XTUC'</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s">'glyph 1'</span>   <span class="p">:</span> <span class="s">'H'</span><span class="p">,</span>
        <span class="s">'point 1'</span>   <span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
        <span class="s">'glyph 2'</span>   <span class="p">:</span> <span class="s">'H'</span><span class="p">,</span>
        <span class="s">'point 2'</span>   <span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="s">'direction'</span> <span class="p">:</span> <span class="s">'x'</span><span class="p">,</span>
        <span class="s">'parent'</span>    <span class="p">:</span> <span class="s">'XTRA'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1"># more font-level measurements here ...
</span><span class="p">}</span>
</code></pre>
          </div>
        </div>
        <p>The key for glyph-level measurements is an identifier created from the two point indexes.</p>
        <div class="language-python highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="n">glyphMeasurements</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"a"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">ptIndex1</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">ptIndex2</span><span class="si">}</span><span class="s">'</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s">'name'</span>      <span class="p">:</span> <span class="s">'XTRA'</span><span class="p">,</span>
          <span class="s">'direction'</span> <span class="p">:</span> <span class="s">'x'</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="c1"># more glyph-level measurements here ...
</span>    <span class="p">},</span>
    <span class="c1"># more glyphs here ...
</span><span class="p">}</span>
</code></pre>
          </div>
        </div>
        <h2 id="json-format">JSON format</h2>
        <p>Measurements can be stored in standalone JSON files using the format below.</p>
        <p>The same set of measurement definitions can be used to measure all sources in a designspace.</p>
        <div class="language-json highlighter-rouge">
          <div class="highlight">
            <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"font"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"XTUC"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"glyph 1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"point 1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"glyph 2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"point 2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"parent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XTRA"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">/*</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">font-level</span><span class="w"> </span><span class="err">measurements</span><span class="w"> </span><span class="err">here</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"glyphs"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"0 20"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XOLC"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"11 12"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XOLC"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"13 19"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XTLC"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">/*</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">glyph-level</span><span class="w"> </span><span class="err">measurements</span><span class="w"> </span><span class="err">here</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">/*</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">glyphs</span><span class="w"> </span><span class="err">here</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="err">*/</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          </div>
        </div>
      </div>
    </main>
    <footer class="container mx-auto px-auto px-md-4 my-4">
      <p class='small text-muted'>
        This work is licensed under <a href='http://creativecommons.org/licenses/by-sa/4.0/'>Creative Commons Attribution-ShareAlike 4.0 International</a>.
        <i class="bi bi-arrow-counterclockwise"></i> Last updated on 13 Oct 2024 09:33:32.
      </p>
    </footer>
  </body>
</html>